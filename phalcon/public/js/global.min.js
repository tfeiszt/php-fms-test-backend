function jasGridInstance(a,b){this.name=a,this.scope={params:{},method:"POST",url:"",data:null},this.defaultUrl=b.default_url,this.idGridItem=b.id_grid_item,this.idPaginationItem=b.id_pagination_item,this.idLimitSelectorItem=b.id_limit_selector_item,this.idGridHeaderItem=b.id_header_item,this.selectedItem=!1,this.lastClickedItem=null,b.behaviour&&"undefined"!=typeof b.behaviour?this.behaviour={infinity:b.behaviour.infinity?b.behaviour.infinity:!1,refresh_after_delete:b.behaviour.refresh_after_delete!==!1,selected_class:b.behaviour.selected_class?b.behaviour.selected_class:"selected",are_u_sure:b.behaviour.are_u_sure?b.behaviour.are_u_sure:"Are you sure?",no_result:b.behaviour.no_result?b.behaviour.no_result:"No results found!",id_no_result_item:b.behaviour.id_no_result_item?b.behaviour.id_no_result_item:b.id_pagination_item,export_link:b.ci_export_link?b.ci_export_link:"id_ci_export_link"}:this.behaviour={infinity:!1,refresh_after_delete:!0,selected_class:"selected",are_u_sure:"Are you sure?",no_result:"No results found!",id_no_result_item:b.id_pagination_item,export_link:"id_ci_export_link"},this.getList=jasGridService.getAjaxList,this.showList=jasGridService.showAjaxList,this.refreshList=jasGridService.getExternalAjaxList,this.isSelected=jasGridService.hasCiSelection,this.setSelected=jasGridService.selectCiRow,this.getSelected=jasGridService.getCiSelection,this.clearSelected=jasGridService.clearGridSelection,this.clearList=jasGridService.clearAjaxList,this.clearList(this)}if("undefined"==typeof jasApp)var jasApp=new Object;if(jasApp={rootUrl:"",csrfName:"",csrfValue:"",csrf:null,prettyUrl:!1,environment:"dev",init:function(a){this.rootUrl=a.root_url,this.csrfName=a.csrf_name,this.csrfValue=a.csrf_value,this.csrf=a.csrf,this.prettyUrl=a.pretty_url&&"undefined"!=typeof a.pretty_url?1==a.pretty_url:!1,this.environment=a.environment}},"undefined"==typeof jasHelper)var jasHelper=new Object;if(jasHelper={errorHandler:function(a,b){a&&(a.callback?(this.callbackHandler(a),a.message&&console.log(a.message)):a.message&&alert(a.message))},callbackHandler:function(a){if(a.callback&&"undefined"!=typeof a.callback&&"[object Object]"!==Object.prototype.toString.call(a.callback)){var b=new Function(a.callback);b()}},urlAppend:function(a,b,c){return 1===jasApp.prettyUrl?a+"/"+c:a+"&"+b+"="+c},parseResult:function(a){if("object"!=typeof a)var b=jQuery.parseJSON(a);else var b=a;return b},isEmpty:function(a){if(null==a)return!0;if(a.length>0)return!1;if(0===a.length)return!0;if("object"==typeof a){count=0;for(i in a)a.hasOwnProperty(i)&&count++;if(count>0)return!1}return!0},checkResultObject:function(a,b){return"object"!=typeof a&&this.isEmpty(a)?b===!0:!0},e:function(a){"dev"==jasApp.environment&&console.log(a)}},"undefined"==typeof jasHttp)var jasHttp=new Object;if(jasHttp={simpleAjaxPost:function(a,b,c){$.ajax({type:"POST",url:a,data:b,async:!0,success:function(a){c&&c(a)}})},simpeAjaxGet:function(a,b,c){$.ajax({type:"GET",url:a,data:b,async:!0,success:function(a){c&&c(a)}})},request:function(a,b,c){var d=new $.Deferred;return $.ajax({method:a,url:b,data:c,async:!0}).success(function(a,b,c){switch(c.status){case 200:d.resolve(a);break;case 201:d.resolve(a);break;case 400:d.reject(a);break;case 500:d.reject(a);break;default:d.reject(a)}}).error(function(a,b,c){var e={Result:"ERROR",data:a};jasHelper.e(e),d.reject(a)}),d.promise()},getData:function(a,b,c){p=this.request(a.method,a.url,a.params),p.then(function(c){a.data=jasHelper.checkResultObject(c)?jasHelper.parseResult(c):{},b&&b(a,c)}).fail(function(b){c&&c(a,b)})}},"undefined"==typeof controlService)var controlService=new Object;if(controlService={scope:{data:null},controller:null,modalFormFile:null,modalFormFolder:null,modalFormRename:null,grids:[],init:function(a,b,c){this.modalFormFile=a.modal_form_file,this.modalFormFolder=a.modal_form_folder,this.modalFormRename=a.modal_form_rename,this.controller=a.controller,this.grids.push(b),this.grids.push(c),this.controller.find(".btn-create-file").unbind("click"),this.controller.find(".btn-create-file").bind("click",function(){return controlService.modalFormFile.find(".modal-title").html("Create Textfile"),controlService.createFile(),!1}),this.controller.find(".btn-create-folder").unbind("click"),this.controller.find(".btn-create-folder").bind("click",function(){return controlService.modalFormFolder.find(".modal-title").html("Create New Folder"),controlService.createFolder(),!1}),this.modalFormFile.find("#newFileSave").unbind("click"),this.modalFormFile.find("#newFileSave").bind("click",function(){return controlService.saveFile(),!1}),this.modalFormFolder.find("#newFolderSave").unbind("click"),this.modalFormFolder.find("#newFolderSave").bind("click",function(){return controlService.saveFolder(),!1}),this.controller.find(".btn-copy").unbind("click"),this.controller.find(".btn-copy").bind("click",function(){return controlService.copyFile(),!1}),this.controller.find(".btn-move").unbind("click"),this.controller.find(".btn-move").bind("click",function(){return controlService.moveFile(),!1}),this.controller.find(".btn-delete").unbind("click"),this.controller.find(".btn-delete").bind("click",function(){return controlService.deleteObject(),!1}),this.controller.find(".btn-rename").unbind("click"),this.controller.find(".btn-rename").bind("click",function(){return controlService.modalFormRename.find(".modal-title").html("Rename"),controlService.renameObject(),!1}),this.modalFormRename.find("#renameFormSave").unbind("click"),this.modalFormRename.find("#renameFormSave").bind("click",function(){return controlService.doRename(),!1}),$(".manager-list").bind("click",function(){controlService.setActiveByName($(this).attr("data-gridname"))}),this.refreshGrids()},getActiveGrid:function(){for(var a=0;a<this.grids.length;a++)if(this.grids[a].idGridHeaderItem.hasClass("active"))return this.grids[a];return!1},getInActiveGrid:function(){for(var a=0;a<this.grids.length;a++)if(!this.grids[a].idGridHeaderItem.hasClass("active"))return this.grids[a];return!1},refreshActiveGrid:function(){grid=this.getActiveGrid(),grid.getList(grid)},refreshGrids:function(){for(var a=0;a<this.grids.length;a++)this.grids[a].getList(this.grids[a])},copyFile:function(){return source=this.getActiveGrid(),target=this.getInActiveGrid(),source.isSelected()?void(".."!=source.getSelected().attr("id")?(data={},data.name=source.getSelected().attr("id"),data.target=target.scope.data.data.entry_path,data.source=source.scope.data.data.entry_path,jasHttp.simpleAjaxPost(jasApp.rootUrl+"manager/copy",data,function(a){controlService.refreshGrids()})):alert("You can't copy the parent folder")):(alert("There is no selected file"),!1)},moveFile:function(){return source=this.getActiveGrid(),target=this.getInActiveGrid(),source.isSelected()?void(".."!=source.getSelected().attr("id")?(data={},data.name=source.getSelected().attr("id"),data.target=target.scope.data.data.entry_path,data.source=source.scope.data.data.entry_path,jasHttp.simpleAjaxPost(jasApp.rootUrl+"manager/move",data,function(a){controlService.refreshGrids()})):alert("You can't move the parent folder")):(alert("There is no selected file"),!1)},createFile:function(){var a=this.getActiveGrid();this.modalFormFile.find('input[name="name"]').val(""),this.modalFormFile.find('textarea[name="content"]').val(""),this.modalFormFile.find('input[name="parent"]').val(a.scope.data.data.entry_path),this.modalFormFile.modal("show")},createFolder:function(){var a=this.getActiveGrid();this.modalFormFolder.find('input[name="name"]').val(""),this.modalFormFolder.find('input[name="parent"]').val(a.scope.data.data.entry_path),this.modalFormFolder.modal("show")},renameObject:function(){return source=this.getActiveGrid(),source.isSelected()?".."!=source.getSelected().attr("id")?(this.modalFormRename.find('input[name="name"]').val(source.getSelected().attr("id")),this.modalFormRename.find('input[name="old_name"]').val(source.getSelected().attr("id")),this.modalFormRename.find('input[name="parent"]').val(source.scope.data.data.entry_path),this.modalFormRename.modal("show"),!1):void alert("You can't rename the parent folder"):(alert("There is no selected file"),!1)},deleteObject:function(){return source=this.getActiveGrid(),source.isSelected()?".."!=source.getSelected().attr("id")?confirm("Are you sure?")?(data={parent:source.scope.data.data.entry_path,name:source.getSelected().attr("id")},jasHttp.simpleAjaxPost(jasApp.rootUrl+"manager/deleteObject",data,function(a){var b=jasHelper.parseResult(a);return 1!=b.success&&alert("Deletion has not been success"),controlService.refreshGrids(),!1}),!1):!1:void alert("You can't remove the parent folder"):(alert("There is no selected file"),!1)},doRename:function(){data=this.modalFormRename.find("form").serialize(),jasHttp.simpleAjaxPost(jasApp.rootUrl+"manager/renameObject",data,function(a){controlService.refreshGrids(),controlService.modalFormRename.modal("hide")})},saveFile:function(){data=this.modalFormFile.find("form").serialize(),jasHttp.simpleAjaxPost(jasApp.rootUrl+"manager/createFile",data,function(a){controlService.refreshGrids(),controlService.modalFormFile.modal("hide")})},saveFolder:function(){data=this.modalFormFolder.find("form").serialize(),jasHttp.simpleAjaxPost(jasApp.rootUrl+"manager/createFolder",data,function(a){controlService.refreshGrids(),controlService.modalFormFolder.modal("hide")})},setActiveByName:function(a){for(var b=0;b<this.grids.length;b++)this.grids[b].idGridHeaderItem.removeClass("active"),this.grids[b].name==a&&this.grids[b].idGridHeaderItem.addClass("active")}},"undefined"==typeof jasGridService)var jasGridService=new Object;jasGridService={getAjaxList:function(a,b){a.scope.url=b&&"undefined"!=typeof b&&""!=b?b:a.defaultUrl,a.scope.data=null,a.scope.params[jasApp.csrfName]=jasApp.csrfValue,jasHttp.getData(a.scope,function(b,c){a.scope=b,a.showList(a,b,jasHelper.parseResult(c))},function(a,a,b){jasHelper.errorHandler(b)})},getExternalAjaxList:function(a,b){b[jasApp.csrfName]=jasApp.csrfValue,a.scope.url=a.defaultUrl,a.scope.data=null,a.scope.params=b,jasHttp.getData(a.scope,function(b,c){a.scope=b,a.showList(a,b,jasHelper.parseResult(c))},function(){jasHelper.errorHandler(res)})},showAjaxList:function(a,b,c){if(c=jasHelper.parseResult(c),!c.success)return jasHelper.errorHandler(c),!1;a.behaviour.infinity||(a.clearSelected(a),a.idGridItem.empty()),a.behaviour.id_no_result_item&&(a.behaviour.id_no_result_item.empty(),a.behaviour.id_no_result_item.hide()),a.idPaginationItem.empty(),a.idLimitSelectorItem&&a.idLimitSelectorItem.empty(),a.idGridHeaderItem&&(a.idGridHeaderItem.empty(),a.idGridHeaderItem.html(c.data.entry_point));var d=c.data.entities;if(d)if(d.length>0){for(i=0;i<d.length;i++)a.idGridItem.append(d[i]);a.idPaginationItem.empty(),a.idPaginationItem.append(c.pagination),""==c.pagination?a.idPaginationItem.hide():a.idPaginationItem.show(),a.idPaginationItem.find("a").click(function(){return a.getList(a,$(this).attr("href")),!1}),a.idLimitSelectorItem&&(a.idLimitSelectorItem.append(c.pagination_limit_selector),""==c.pagination_limit_selector?a.idLimitSelectorItem.hide():a.idLimitSelectorItem.show(),a.idLimitSelectorItem.find("select").change(function(){return a.refreshList(a,{ci_limit_link:$(this).val()}),!1}))}else a.behaviour.id_no_result_item&&(a.behaviour.id_no_result_item.append(a.behaviour.no_result),a.behaviour.id_no_result_item.show()),a.idLimitSelectorItem&&a.idLimitSelectorItem.hide();else a.behaviour.id_no_result_item&&(a.behaviour.id_no_result_item.append(a.behaviour.no_result),a.behaviour.id_no_result_item.show()),a.idLimitSelectorItem&&a.idLimitSelectorItem.hide();var e=this;a.idGridItem.find(".item-folder .item-link").unbind("click"),a.idGridItem.find(".item-folder .item-link").bind("click",function(){var a={folder:$(this).attr("data-folder")};e.refreshList(e,a)}),a.idGridItem.find("li").bind("click",function(){e.clearSelected(),e.setSelected($(this))}),controlService.setActiveByName(a.name)},clearAjaxList:function(a){a.clearSelected(),a.idGridItem.empty(),a.idPaginationItem.empty()},hasCiSelection:function(){var a=this;return!!a.selectedItem},selectCiRow:function(a){var b=this;return b.clearSelected(),b.selectedItem=a,a.addClass(b.behaviour.selected_class),!1},getCiSelection:function(){var a=this;return a.selectedItem?a.selectedItem:!1},clearGridSelection:function(a){var a=this;a.selectedItem&&(a.selectedItem.removeClass(a.behaviour.selected_class),a.selectedItem=null)}};